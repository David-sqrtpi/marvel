<div class="cart-container">
    <h2>Shopping Cart</h2>

    @if(items().length != 0 ) {

    <div class="cart-items">
        @for(item of items(); track $index){

        <div class="cart-item">
            <img [src]="item.comic.image" class="item-image" />
            <div class="item-details">
                <h3>{{item.comic.title}}</h3>
                <p>Unit Price: ${{item.unitPrice}}</p>
                <p style="font-weight: bold;">Total Price: ${{item.totalPrice.toFixed(2)}}</p>
                <div class="quantity">
                    <button mat-icon-button (click)="changeQuantity(item, -1)" [disabled]="item.quantity == 0" class="quantity-icon">
                        <mat-icon>remove</mat-icon>
                    </button>
                    <span>{{ item.quantity }}</span>
                    <button mat-icon-button (click)="changeQuantity(item, 1)" class="quantity-icon">
                        <mat-icon>add</mat-icon>
                    </button>
                </div>
            </div>
            <button mat-icon-button (click)="doSomething(item.comic.id)" class="remove-button">
                <mat-icon>delete</mat-icon>
            </button>
        </div>
        }

        <div class="total">
            <h3>Items: {{ itemsSum() }}</h3>
            <h3>Total: ${{ total().toFixed(2) }}</h3>
            <button mat-flat-button (click)="squareCheckout()">Pay with Square</button>
            <button mat-flat-button (click)="payPalCheckout()">Pay with PayPal</button>
        </div>
    </div>
    }
    @else {
    <div class="empty-cart">
        <p>Your cart is empty, <a routerLink="/comics">start adding comics</a> or see <a routerLink="/history">purchase history</a>.</p>
    </div>
    }
</div>